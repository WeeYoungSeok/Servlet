DROP SEQUENCE MYNOSEQ;
DROP TABLE MYMEMBER;

CREATE SEQUENCE MYNOSEQ;


-- 회원가입시
-- 번호, 아이디, 비밀번호, 이름, 주소, 전화번호, 이메일, 가입여부(Y:가입/N:탈퇴)
-- 등급(ADMIN,USER,...)
CREATE TABLE MYMEMBER(
	MYNO NUMBER NOT NULL,			--PRIMARY KEY
	MYID VARCHAR2(500) NOT NULL,	--UNIQUE
	MYPW VARCHAR2(500) NOT NULL,
	MYNAME VARCHAR2(500) NOT NULL,
	MYADDR VARCHAR2(2000) NOT NULL,
	MYPHONE VARCHAR2(20) NOT NULL,	--UNIQUE
	MYEMAIL VARCHAR2(100) NOT NULL,	--UNIQUE
	MYENABLED VARCHAR2(2) NOT NULL,	--CHECK (Y OR N)
	MYROLE VARCHAR2(100) NOT NULL,
	CONSTRAINT U_ID UNIQUE(MYID),
	CONSTRAINT P_NO PRIMARY KEY(MYNO),
	CONSTRAINT U_PH UNIQUE(MYPHONE),
	CONSTRAINT U_EM UNIQUE(MYEMAIL),
	CONSTRAINT CK_ME CHECK(MYENABLED IN('Y','N'))
);

ALTER TABLE MYMEMBER
RENAME CONSTRAINT CK_ME TO CK_EM;

INSERT INTO MYMEMBER
VALUES (MYNOSEQ.NEXTVAL, 'admin', 'admin1234', '관리자', '서울시 강남구', '010-0000-0000', 'ADMIN@ADMIN.COM', 'Y', 'ADMIN');

SELECT MYNO, MYID, MYPW, MYNAME, MYADDR, MYPHONE, MYEMAIL, MYENABLED, MYROLE
FROM MYMEMBER
ORDER BY MYNO DESC;